(function(l,u,G){l.execute(function(){l.register("postMetric",function(){return{postCountMetric:function(l){if("undefined"!==typeof l){var d=u.ue;if(d){var e=d.count(l)||0;d.count(l,e+1)}}}}});l.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(C,d,e,h){e.extraVideos&&(h.videos=C.merge(e.extraVideos,h.videos),delete e.extraVideos);C=C.extend(!0,{},e,h);var c=new d(C);l.register("ImageBlockAPI",function(){return c.api});return c});
l.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(C,d,e){C=e.airyConfig;C.jsUrl&&l.load.js(C.jsUrl);C.cssUrl&&l.load.css(C.cssUrl)});l.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(l,d,e,h,c,a){var b={};return function(g){var k=this;k.dispatch=function(a,e){var g=b[a];c.isDefined(g)&&d.each(g,function(a,b){b.call(u,e)})};k.register=function(a,d){c.isDefined(b[a])||(b[a]=[]);
"function"===typeof d&&b[a].push(d)};k.model=new e(g,k);k.view=new h(g,k,k.model);k.api=new a(g,k,k.model);k.init=function(){k.model.init();k.view.init()};k.init()}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(l,d,e){function h(a,b,c,d,f){e.isDefined(a)&&(m.type=a);e.isDefined(b)&&(m.index=b);e.isDefined(c)&&(m.thumbnailIndex=c);e.isDefined(d)&&(m.variant=d);e.isDefined(f)&&(m.color=f)}function c(a){h("image",0,0,"MAIN",a||k.landingAsinColor||k.defaultColor)}
function a(a){a=a.data;n=l.copy(m);h(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function b(b){a(b);b=l.copy(b);b.data=l.copy(m);f.dispatch("updateView",b)}function g(){n=l.copy(m);c(m.color)}var k,f,m={},n={},u;return function(d,e){f=e;k=d;f.register("updateSelection",b);f.register("updateModel",a);f.register("resetModel",g);this.init=function(){c()};this.getCurrentItem=function(){return l.copy(m)};this.getPreviousItem=function(){return l.copy(n)};this.setCurrentEvent=function(a){u=a};this.getCurrentEvent=
function(){return u}}});l.when("ImageBlockBTF").execute(function(C){function d(d,h,c,a,b){function g(a){"click"===a.type&&H.overrideAltImageClickAction?x.dispatch("thumbActionClick",a):x.dispatch("updateSelection",a)}function k(a){H.useClickZoom||x.dispatch("imageClick",a)}function f(a){H.useClickZoom||x.dispatch("imageHover",a)}function m(b){!c.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(p.update(b),"swatchHover"!==b.type&&A.getPreviousItem().thumbnailIndex!==b.data.thumbnailIndex&&
a.postCountMetric(b.data.type+"ThumbnailSelected"),d.trigger("image-block-thumbnail-selected",b.data)):p.render(b.data.color,!1,b.onload)}function n(a){x.dispatch("resize",a)}function l(a){c.selectThumbnail(a,D)}function q(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function C(a){var b=A.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var p,H,x,A,D;return function(a,c,E){p=this;H=a;x=c;A=E;D=h("#imageBlock #altImages ul");var B=h("#imageBlock .canvas"),
K=h("#main-image-container"),F;p.subViews=[];for(c=0;c<b.length;c++)p.subViews.push(new b[c](a,E,p,x));p.render=function(a,b,c){var d=0;D.find(".item").remove();a=a||A.getCurrentItem().color;h.each(p.subViews,function(e,f){d=f.render(a,d,B,D,K,b,c)||d});var e=D.find(".a-button-selected").closest(".a-declarative");F=C(e)};p.init=function(){D=h("#imageBlock #altImages ul");var a=D.find(".a-button-selected").closest(".a-declarative"),b=a.data("action"),a=a.data(b)||{};a.color=H.landingAsinColor||H.defaultColor;
x.dispatch("updateModel",{data:a});p.render(a.color,!0);H.isDebug&&u.console&&console.log(H);x.register("updateView",m);x.register("selectThumbnail",l);H.disableHoverOnAltImages||d.declarative("thumb-action",["mouseenter","mouseleave"],g);d.declarative("thumb-action",["click"],g);d.declarative("main-image-click",["click"],k);d.declarative("main-image-click",["mouseenter","mouseleave"],f);h(u).resize(n)};p.update=function(a){h.each(p.subViews,function(b,c){c.update(a)});H.usePeekHover&&("mouseleave"===
a.type?x.dispatch("updateSelection",F):"click"===a.type&&(F=q(a)||F))}}}C=["A","jQuery","imageBlockUtils","postMetric"].concat(C.views);l.when.apply(l,C).register("ImageBlockView",function(){for(var e=arguments[0],h=arguments[1],c=arguments[2],a=arguments[3],b=[],g=4,k=arguments.length;g<k;g++)b.push(arguments[g]);return d(e,h,c,a,b)})});l.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockAltImageView",function(C,d,e,h,c){function a(a,b,c,f){if(!e.isjQueryObjDefined(a.find(".a-button-selected"))){var g=
z.getCurrentItem();if(!f||"chromeless-video"!==g.type||!r.autoplayVideo){f=0;"image"===g.type&&(f=Math.max(k(g.color,g.variant),0));var h=b+f;h>=c&&(f=0,h=b);b=e.getImageHash(g.color,f,r);-1!==b&&(E.dispatch("updateModel",{data:{index:f,thumbnailIndex:h,variant:b.variant,type:"image"}}),b=a.find(".item").get(h),e.selectGivenThumbnail(d(b),a))}}}function b(b,c,f){c=r.colorImages&&r.colorImages[c];var g=b;e.isDefined(c)&&(d.each(c,function(a,c){b<r.maxAlts&&(e.createThumbnail({type:"image",index:a,
thumbnailIndex:b,variant:c.variant},c.thumb,B),b++)}),a(B,g,b,f));return b}function g(a,b){if("image"===a.type){var c=d("#image-canvas-caption #canvasCaption"),e,f=r.staticStrings,g=r.colorImages,k=a.color,h=a.index;b&&r.useIV?e=f.clickToExpand:g[k]&&g[k][h].hiRes&&r.useHoverZoom?(e=r.useHoverZoomIpad?f.touchToZoom:r.useClickZoom?f.clickToZoom:f.rollOverToZoom,r.hoverZoomIndicator&&(e="<img src='"+r.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):r.useIV&&(e=f.clickToExpand);c.html(e)}}function k(a,b){return e.getIndexForVariant(a,
b,r)}function f(a,b){var c;d.each(a.main,function(a,b){e.isDefined(c)||(c=parseFloat(b[1]/b[0])<=parseFloat(r.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var f="a-dynamic-image "+c,g=e.getMaxDimensionsOfMainImage(a.main,F,r),k=g[0],h=g[1],g=d("<div></div>"),k={"max-height":k,"max-width":h};g.addClass(f).css(k).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);return g}function m(a){var b=K.find(".swatchHoverExp");a=f(a);b.find(".imgTagWrapper").html(a);
C.loadImageManually(a);return b}function n(a){var b=F.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");r.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(r.imgTagWrapperClasses)}function u(a,b){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var d=e.getImageHash(a.color,a.index,r);if(-1===d)return d={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},e.lazyLoadingRequired(a,z,r)?p(a,!1,b):(E.dispatch("updateModel",d),e.showUnavailable(a.color)),
-1;var k=K.find(".item.itemNo"+a.thumbnailIndex);if(!e.isjQueryObjDefined(k)){var k=a.thumbnailIndex,k=K.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+k+" maintain-height"),h=f(d,b);k.find(".placeHolder").replaceWith(h);K.find(".list").append(k);C.loadImageManually(h)}n(k);E.dispatch("loadMagnifier");g(a);r.useIV&&e.isDefined(d.hiRes)&&k.css("cursor","pointer");a.isUserGenerated&&(k=z.getPreviousItem(),h=a.variant,e.isDefined(h)&&k.thumbnailIndex!==
a.thumbnailIndex&&(c.postCountMetric("ImageThumbnailSelectedVariant:"+h),0===h.indexOf("IG")&&(c.postCountMetric("IGImageSelectedVariant:"+h),c.postCountMetric("IGImageSelectedEvent:"+a.interaction))));C.trigger("dp:image-block:update",d)}}function q(a){var b=Math.max(k(a.color,z.getCurrentItem().variant),0),b=e.getImageHash(a.color,b,r);if(-1===b)return e.lazyLoadingRequired(a,z,r)?e.lazyLoadOnHoverEnabled(r)&&(t(".3",!0),e.spinner(K,!0),C.delay(function(){z.getCurrentEvent().data===a&&p(a,!0)},
500)):e.showUnavailable(a.color),-1;var c=m(b);n(c);C.trigger("dp:image-block:update",b)}function t(a,b){b?K.css("opacity",a):d("#imageBlock").css("opacity",a)}function p(a,b,c){G=b;M=c;var d=a.color,f=r.colorToAsin[d];if(f&&f.asin){var g={};g.params={asin:f.asin,productGroupID:r.productGroupID,color:d};g.success=function(g){g?(e.ajaxState(f.asin,"success"),r.colorImages[d]=g.colorImage,d===a.color&&(b&&G?a===z.getCurrentEvent().data&&(H(a),q(a)):(g={type:"updatedData",data:z.getCurrentItem(),onload:c||
M},E.dispatch("updateView",g))),l.register(e.rankedImagesReadyEvent(f.asin))):e.ajaxState(f.asin,"fail")};g.error=function(){e.ajaxState(f.asin,"fail")};g.indicator=e.spinner(K);e.ajaxState(f.asin,void 0)&&"fail"!==e.ajaxState(f.asin,void 0)||(t(".3",b),h.load("/gp/product/features/apparel-main-image/ranked-images.html",g),e.ajaxState(f.asin,"sent"));return r.colorImages&&r.colorImages[d]}}function H(a,b){e.lazyLoadingRequired(a,z,r)||(d("#imageBlock").css("opacity","1"),K.css("opacity","1"),e.spinner(K,
!1),K.find("li").removeClass("selected"),d("#image-canvas-caption #canvasCaption").empty(),e.hideUnavailable(),b&&K.find(".list .item").remove())}function x(){var a=K.find(".item .imgTagWrapper"),b=e.getContainerHeight(F,r.holderRatio,r.holderMaxHeight);0<b&&(F.height(b),a.height(b));K.find("img.a-dynamic-image").each(function(){var a=d(this);a.data("a-manual-replacement")&&C.loadDynamicImage(this);var b=a.data("a-dynamic-image"),b=e.getMaxDimensionsOfMainImage(b,F,r);a.css({"max-height":b[0]+"px",
"max-width":b[1]+"px"})})}function A(a){g(z.getCurrentItem(),"mouseenter"===a.type)}var D,r,z,E,B,K,F,G,M;return function(a,c,d,f){D=this;r=a;z=c;E=f;r.colorImages[r.landingAsinColor]=r.colorImages[r.defaultColor];D.render=function(a,c,d,f,g,k,h){K=d;B=f;F=g;a=b(c,a,k);k||(c=z.getCurrentItem(),e.lazyLoadingRequired(c,z,r)&&E.dispatch("updateModel",{data:{type:"lazy-loaded"}}));H(z.getCurrentItem(),!k);u(z.getCurrentItem(),h);return a};D.update=function(a){var b=a.data;z.setCurrentEvent(a);"ingress"!==
b.type&&H(a.data,!1);"swatchHover"===a.type?b.color===z.getCurrentItem().color?u(z.getCurrentItem()):a.captured||-1===q(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,u(b),r.usePeekHover&&"click"!==a.type||e.selectGivenThumbnail(a.$declarativeParent,B))};E.register("imageHover",A);E.register("resize",x)}});l.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockMagnifierView",function(l,d,e,h){function c(a){q?a.css("cursor","url('"+f.staticImages.zoomIn+
"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function a(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(e.isDefined(b))for(var b=b[1].split("_"),c=0;c<b.length;c++){var d=b[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);e.isDefined(d)&&(a[d[1]]=parseInt(d[2],10))}return a}function b(b,g){function k(){var a;g.useClickZoom?(a=g.offsetInClickZoom,a=[Math.min(1,Math.max(0,G[0]-(O[0]+a))/(O[2]-2*a)),Math.min(1,Math.max(0,G[1]-(O[1]+a))/(O[3]-
2*a))]):a=F&&F.updatePosition();if(a&&K&&K.detailSize){var b=[K.detailSize[0]-K.rect.width,K.detailSize[1]-K.rect.height];K.detailImage.get(0).style.left=-(a[0]*b[0])+"px";K.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function m(a){var b=N?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";G=N?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function n(a){N&&a.preventDefault();m(a);g.useClickZoom?a=[O[0],O[1],O[0]+O[2],O[1]+O[3]]:(a=F?F.offset:b.offsetParent().offset(),a=[M[0]+a.left,M[1]+a.top,
M[0]+M[2]+a.left,M[1]+M[3]+a.top]);G[0]<a[0]||G[1]<a[1]||G[0]>=a[2]||G[1]>=a[3]?(g.fadeMagnifier?Z||(Z=!0,U=setTimeout(function(){l(!0)},500)):g.useClickZoom||l(),R&&(R=!1,clearTimeout(da))):(R||(R=!0,da=setTimeout(function(){h.postCountMetric("dppc_hoverZoomOpened")},1E3)),g.fadeMagnifier&&Z&&(Z=!1,clearTimeout(U)),k())}function l(a){a&&v.suppressMagnifier(!0);if(P&&(K&&K.hide(),F&&(F.destroy(),F=null),P=!1,N?(b.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),d(document).trigger("disengaged.magnifier")):
d(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),C(),a))b.one("click.magnifier touchstart.magnifier",function(a){r(a,!0)})}function r(a,c){c&&v.suppressMagnifier(!1);if(!P&&!T&&(0===X&&(h.postCountMetric("dppc_hoverTime",new Date-(u.ue&&u.ue.t0||0)),X=1),Q[L]||(h.postCountMetric("dppc_hoverMain"),Q[L]=1),M=[b.position().left,b.position().top,b.width(),b.height()],L&&(m(a),K?K.refit().show():K=new S,g.useClickZoom||(F=F||new J),O=K.getWindowSize(),k()),P=!0,N?(b.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",
n).bind("touchend.magnifier",l),d(document).trigger("engaged.magnifier")):(b.unbind("mousemove.magnifier"),d(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n)),c)){var e=d("#zoomWindow");if(0<e.length)e.one("click.magnifier touchend.magnifier",function(a){l(!0)})}}function C(){g.useHoverZoom&&(N?b.bind("touchstart.magnifier touchmove.magnifier",r):b.bind("mousemove.magnifier",r))}var v=this,B={detailImageUrl:b.attr("data-old-hires"),location:"over",locationElement:b,prelaod:"ready",
zIndex:50,offsetInClickZoom:50};g=d.extend(B,g);g.adjustment=[10,0,-10,0];var K=null,F=null,G=null,M=null,O=null,I={"null":1,"":1,undefined:1},P=!1,T=!1,L=g.detailImageUrl,N=g.useHoverZoomIpad||0,X=0,Q={},J=function(){function a(c){var d=Math.round(Math.min(b.width(),K.rect.width/c));c=Math.round(Math.min(b.height(),K.rect.height/c));n.css({width:d,height:c});k=[d,c]}var e=this,k=[0,0],h=(K.detailSize&&K.detailSize[0]||5E8)/M[2],m=(K.detailSize&&K.detailSize[1]||5E8)/M[3],h=m>h?m:h;d("#magnifierLens").remove();
var n=d("<div id='magnifierLens' />").css({backgroundImage:"url("+g.generalImageUrls.zoomLensBackground+")",position:"absolute"});f.showMagnifierOnHover?c(n):n.css("cursor","pointer");e.updatePosition=function(){var a=[M[2]-k[0],M[3]-k[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(G[0]-k[0]/2-M[0]-e.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(G[1]-k[1]/2-M[1]-e.offset.top)/a[1])),d=M[0]+Math.round(b*a[0]),a=M[1]+Math.round(c*a[1]);n.get(0).style.left=d+"px";n.get(0).style.top=a+"px";return[b,
c]};e.destroy=function(){n.remove()};e.offset=b.offsetParent().offset();a(h);e.updatePosition();n.appendTo(b.parent());K.detailImage[0].complete||K.detailImage.load(function(){var b=K.detailImage.width()/M[2];a(b);e.updatePosition()})};J.preload=function(){v.preload(g.generalImageUrls.lensBackgroundUrl)};var S=function(){function c(){var a={};if("over"===g.location){var a=g.useClickZoom,f={},k=d("#leftCol"),n=d("#centerCol"),r=d("#rightCol"),q=d("#hover-zoom-end"),C=d("#actionPanelContainer"),B=e.isjQueryObjDefined(k)?
k.outerHeight():n.outerHeight();f.top=e.isjQueryObjDefined(k)?k.offset().top:n.offset().top;f.bottom=B+f.top;f.right=e.isjQueryObjDefined(r)?r.offset().left:C.offset().left;f.left=a?0:k.offset().left+k.outerWidth();e.isjQueryObjDefined(q)&&q.offset().top>f.bottom&&(f.bottom=q.offset().top);a=f}else"right"===g.location&&(a=b.offset(),a={left:a.left+b.outerWidth(),top:a.top,right:a.left+b.outerWidth()+400,bottom:a.top+400});g.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+d(g.minHeightElement).outerHeight()));
a.bottom=Math.min(a.bottom,d(u).scrollTop()+d(u).height());a.left+=m[0];a.top+=m[1];a.right+=m[2];a.bottom+=m[3];a.width=a.right-a.left;a.height=a.bottom-a.top;g.enhancedHoverOverlay&&e.isDefined(u.pageXOffset)&&(f=d(u).width(),a.width=f-a.left+u.pageXOffset-18,a.height-=14);l.css({left:a.left,top:a.top,width:a.width,height:a.height});h.rect=a;return h}function f(b){var c=new Image;h.detailSize=[0,0];c.onload=function(){h.detailSize=[c.width,c.height];k()};c.src=b.attr("src");if(0<c.width&&0<c.height)h.detailSize=
[c.width,c.height];else if(g.detailImageSize)h.detailSize=g.detailImageSize;else{b=a(c.src);var d=M[2]/M[3];b.SS||b.AA?(b=b.SS||b.AA,h.detailSize=[b,b]):b.SX?h.detailSize=[b.SX,Math.round(b.SX/d)]:b.SY?h.detailSize=[Math.round(b.SY*d),b.SY]:b.SL&&(h.detailSize=1<=d?[b.SL,Math.round(b.SL/d)]:[Math.round(b.SL*d),b.SL])}}var h=this,m=g.adjustment;d("#zoomWindow").remove();var n={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:g.zIndex};g.enhancedHoverOverlay&&(n.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
n.border="1px solid #949494",n.borderColor="rgb(148,148,148)");var l=d("<div id='zoomWindow' />").css(n);g.fadeMagnifier&&l.fadeIn(200);g.useClickZoom&&(q?l.css("cursor",'url("'+g.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));h.updateImage=function(a){a=d("<img id='detailImg' src='"+a+"'/>").css("position","absolute");h.detailImage&&h.detailImage.remove();l.append(a);d(document).trigger("updated.magnifier");h.detailImage=a;
f(h.detailImage)};h.refit=function(){c();f(h.detailImage);return h};g.fadeMagnifier?(h.show=function(){l.fadeIn(200);return h},h.hide=function(){l.fadeOut(200);return h}):(h.show=function(){l.show();return h},h.hide=function(){l.hide();return h});h.destroy=function(){l.remove();return h};h.getWindowSize=function(){return[h.rect.left,h.rect.top,h.rect.width,h.rect.height]};h.updateImage(L);c();l.appendTo(document.body)},Z=!1,U,R=!1,da;v.preload=function(a){a=d.makeArray(a);for(var b=a.length,c=0;c<
b;c++)a[c]instanceof Array?v.preload(a[c]):"string"===typeof a[c]&&a[c]&&!I[a[c]]&&(I[a[c]]=new Image,I[a[c]].src=a[c])};v.changeImage=function(a,c){P&&l();L=c;b.attr("src",a);v.preload(a);M=[b.position().left,b.position().top,b.width(),b.height()];c&&("immediately"===g.preload?v.preload(c,!0):d(u).ready(function(){v.preload(c)}),K?K.updateImage(c):b.attr("data-old-hires",c))};v.destroy=function(){b.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");d(document).unbind("mousemove.magnifier");
F&&F.destroy();F=null;K&&K.destroy();K=null};v.detailImage=function(){return K.detailImage};v.suppressMagnifier=function(a){T=a};v.isEngaged=function(){return P};v.engageMagnifier=r;v.disengageMagnifier=l;b[0].complete?C():b.one("load",C);v.preload(b.attr("src"));if(g.preload){var qa=g.detailImageUrl,B=function(){v.preload(qa,!0);g.useClickZoom||J.preload()},ia=g.preload;ia.constructor!==Array&&(ia=[ia]);for(var ea=0;ea<ia.length;ea++)if("immediately"===ia[ea])B();else if(d(u)[ia[ea]])d(u)[ia[ea]](B);
else d(u).bind(ia[ea],B)}return v}function g(){if(f.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:f.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:f.useHoverZoomIpad,useHoverZoom:f.useHoverZoom,useClickZoom:f.useClickZoom,fadeMagnifier:f.fadeMagnifier,zoomOutIcon:f.staticImages.zoomOutCur,enhancedHoverOverlay:f.enhancedHoverOverlay};n&&(n.destroy(),n=G);var c=v.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");
e.isjQueryObjDefined(c)&&(f.useClickZoom?(c.one("click.loadmagnifier touchstart.loadmagnifier",function(d){n=new b(c,a);n.engageMagnifier(d,!0)}),q?c.css("cursor",'url("'+f.staticImages.zoomInCur+'"), auto'):(c.css("cursor","-webkit-zoom-in"),c.css("cursor","-moz-zoom-in"),c.css("cursor","zoom-in"))):n=new b(c,a))}}var k,f,m,n,v,q=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){k=this;f=a;m=d;k.render=function(a,b,c,d,e,f){v=c;n&&(n.destroy(),n=G)};k.update=function(a){};m.register("loadMagnifier",
g);m.register("resize",g)}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockTwisterView",function(l,d,e){function h(a,c,d){a=(a=d?d:e.getColorFromState(c.getState().hovered_variations,b))&&""!==a?a:b.defaultColor;k.dispatch("updateView",{type:"swatchHover",data:{color:a}})}function c(a,c,d,h){a=(a=h?h:e.getColorFromState(c.getState().selected_variations,b))&&""!==a?a:b.defaultColor;a===g.getCurrentItem().color?"function"===typeof d&&d():k.dispatch("updateSelection",{type:"swatchClick",
data:{color:a},onload:d})}var a,b,g,k;return function(d,e,n,u){a=this;b=d;g=e;k=u;l.on("image-block-twister-swatch-hover",h);l.on("image-block-twister-swatch-click",c);a.render=function(a,b,c,d,e){};a.update=function(a){}}});l.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(C,d,e,h,c,a){function b(a,b,c,e){!p.autoplayVideo||M||p.useChromelessVideoPlayer?!h.isjQueryObjDefined(a.find(".a-button-selected"))&&(c=H.getCurrentItem(),
!e||p.prioritizeVideos||"chromeless-video"===c.type&&p.autoplayVideo)&&(e=f(c.color,0),-1!==e&&(b+=0,x.dispatch("updateModel",{data:{index:0,thumbnailIndex:b,variant:e.variant,type:p.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),b=a.find(".item").get(b),h.selectGivenThumbnail(d(b),a))):(h.selectGivenThumbnail(a.find("img:last"),a),h.fadeToThumbnail(a.find("img").length-1,z,a))}function g(a){if(!p.useChildVideos)return h.lazyLoadingRequired(H.getCurrentItem(),H,p)?void 0:p.videos;
if(p.colorToVideo[a])return p.colorToVideo[a];var b=p.colorToAsin[a];if(b&&b.asin){var d={};d.params={asin:b.asin,productGroupID:p.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:p.useChromelessVideoPlayer,isUDP:p.isUDP};d.success=function(c){var d=function(){if(c){p.colorToVideo[a]=c;var b={type:"updatedData",data:H.getCurrentItem()};x.dispatch("updateView",b)}};p.lazyLoadExperienceDisabled?d():l.when(h.rankedImagesReadyEvent(b.asin)).execute(function(){d()})};c.load("/gp/product/features/apparel-main-image/videos.html",
d);return p.colorToVideo&&p.colorToVideo[a]}}function k(b,c,f,g){return e.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:c.url,swfUrl:f.swfUrl,foresterMetadataParams:f.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var c=h.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";a.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){b.parent().css("z-index",
8)},videounsupported:function(){x.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){x.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){B.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,e){a=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent",
"z-index":-1});x.dispatch("selectThumbnail",0);d(this).show().css("opacity",1)})}}]})}function f(a,b){var c;if(p.useChildVideos){if(!h.isDefined(p.colorToVideo))return-1;c=p.colorToVideo[a]}else c=p.videos;return h.isDefined(c)&&h.isDefined(c[b])&&h.isDefined(c[b].url)?c[b]:-1}function m(a){if("chromeful-video"===a.type||"chromeless-video"===a.type){var b=f(a.color,a.index);F=p.displayVideoBanner&&h.isDefined(b.banner);if(-1===b)return-1;if("chromeful-video"===a.type){a=z.width()/z.height();var c=
F?parseInt(p.videos[1].videoWidth,10):parseInt(b.videoWidth,10),d=F?parseInt(p.videos[1].videoHeight,10):parseInt(b.videoHeight,10);D.parent().css("z-index",2);0!==d&&0!==c&&(c/=d,a>c?D.css("width",c/a*100+"%"):D.css("height",a/c*100+"%"),F&&u());B?(B.show(),h.loadMediaIntoAiry(B,b,K),r.show(),F&&(O||q(b),E.addClass("show-banner"))):(B=h.createAiryInstanceForChromeful(D,b,K,null,p.autoplayVideo,z,r,A),q(b),r.find("#videoCaption").text(p.staticStrings.playVideo),F&&u());b=B;p.autoplayVideo&&b&&!M&&
(h.toggleVideoCaption(r),b.setVolume(0),b.show(),b.play(),M=!0)}else F&&u(),B?(B.show(),h.loadMediaIntoAiry(B,b,K),B.play(),F&&(O||q(b),E.addClass("show-banner"))):(B=k(D,b,K),q(b),B&&(B.play(),F&&E.addClass("show-banner")));F&&u()}}function n(c,e,f){var k=g(e),m=c;h.isDefined(k)&&0<k.length&&p.alwaysIncludeVideo&&c===p.maxAlts&&(A.find(".item:last").remove(),c--);h.isDefined(k)&&(d.each(k,function(b,d){if(c<p.maxAlts){var f=p.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",g={type:f,
index:b,thumbnailIndex:c,variant:d.variant};if("beauty_display_on_website"!==p.productGroupID||!p.displayVideoBanner||m!==p.maxAlts&&m!==c)h.createThumbnail(g,d.thumb,A);else if(h.createThumbnail(g,d.wideThumbUrl,A),g=p,"beauty_display_on_website"===g.productGroupID){var k=g.colorImages[e].length,n=k+(p.useChildVideos&&p.colorToVideo[e]?p.colorToVideo[e].length:p.videos?p.videos.length:0),l=p.heroImage[e],r=0;l&&(r=l.length);n+=r;l=A.find(".item:first");l=2*l.outerWidth()+parseInt(l.css("marginRight"),
10)-2;n>g.maxAlts?A.find("img:last").width(l+"px"):A.find("img:eq("+k+")").width(l+"px")}G||(G=!0,a.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));c++}}),b(A,m,c,f));return c}function u(){E&&E.height();var a=D.height()-E.height()-r.height(),a=a/D.height();D.css({height:100*a+"%"});E.addClass("show-banner");D.append(r)}function q(a){if(F){var b=E.find("#image_block_video_banner_temp").clone().removeClass("template").removeClass("aok-hidden").addClass("show-banner").attr("id",
"image_block_video_banner");b.find("a").attr("href",a.banner.targetUrl);b.find("img").attr("src",a.banner.logoUrl);b.find("span").text(a.banner.subtext);D.append(b);E=b;O=!0}else O=!1}var t,p,H,x,A,D,r,z,E,B,K,F,G=!1,M=!1,O=!1;return function(a,b,c,e){t=this;p=a;H=b;x=e;K=p.airyConfig;p.colorToVideo={};p.colorToVideo[p.landingAsinColor]=p.colorToVideo[p.defaultColor]=p.videos;t.render=function(a,b,c,e,f,g){A=e;D=f.find("#main-video-container");r=D.parent().find("#video-canvas-caption");z=d("#main-image-container");
E=D.parent().find("#banner-outer-container");p.useChromelessVideoPlayer||D.addClass("chromeful-container");a=n(b,a,g);m(H.getCurrentItem());return a};t.update=function(a){var b=a.data;"ingress"!==b.type&&B&&(B.hide(),D.parent().css("z-index",-1),r.hide(),E&&E.removeClass("show-banner"));if("swatchHover"===a.type)b.color===H.getCurrentItem().color?m(H.getCurrentItem()):a.captured||h.lazyLoadingRequired(b,H,p)&&!h.lazyLoadOnHoverEnabled(p)&&m(H.getCurrentItem());else if("chromeful-video"===b.type||
"chromeless-video"===b.type)m(b),p.usePeekHover&&"click"!==a.type||h.selectGivenThumbnail(a.$declarativeParent,A)}}});l.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","postMetric").register("ImageBlockImmersiveView",function(l,d,e,h,c,a){function b(a){return a.hiRes||a.large||a.main[a.main.length-1]}function g(a,b){var d=l.copy(a);if(c.isDefined(a)&&a.length>b){try{for(var e=-1,f=0;f<a.length;f++){var g=a.charAt(f);if(" "===g||"."===g||"?"===g||";"===g||","===g||":"===g)e=
f;if(f===b-4){d=a.substring(0,-1===e?f:e);break}}}catch(h){d=a.substring(0,b-3)}d+="..."}return d}function k(a){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");var b=a.lastIndexOf(".");return a="_"===a.charAt(b-1)?a.substring(0,b-1)+"_AA50_"+a.substring(b):a.substring(0,b)+"._AA50_"+a.substring(b)}function f(){L.find("#ivTitle").click(function(){T.hide()})}function m(a,b){var c=parseInt(a.css(b),
10);return isNaN(c)?0:c}function n(){var a=L.find("#ivStage"),b=T.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-m(c,"padding-top")-m(c,"padding-bottom");L.css("height",b);var c=L.find("#ivTitle").outerHeight(!0),d=L.find("#ivVariationSelection").outerHeight(!0),e=L.find("#ivMediaSelection").outerHeight(!0),f=L.find("#ivThumbs"),g=m(f,"margin-top")+m(f,"margin-bottom");f.css("height",b-c-d-e-g);L.find("#ivLargeImage").css("height",b);a.css("width",L.width()-m(L,"padding-left")-
m(L,"padding-right")-L.find("#ivThumbColumn").width()-m(a,"margin-left")-m(a,"margin-right"))}function v(){L.find("#ivMediaSelect").change(function(){var a=h(this).val();"all"===a?(L.find("#ivVideoList").hide(),L.find("#ivThumbs").show(),L.find(".ivThumbVideo").show(),"chromeful-video"===U.type&&L.find("#ivVideo_"+U.index).click()):"images"===a?(L.find("#ivVideoList").hide(),L.find("#ivThumbs").show(),L.find(".ivThumbVideo").hide(),"chromeful-video"===U.type&&L.find("#ivImage_0").click()):"videos"===
a&&(L.find("#ivVideoList").show(),L.find("#ivThumbs").hide(),"image"===U.type?L.find("#ivVideoList_0").click():L.find("#ivVideoList_"+U.index).click())})}function q(){var a=L.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=e*g;1>g?(ea?
a.css("cursor","url('"+O.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),ga=!0):ga=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");ra=!1}function t(a){var b=L.find("#ivLargeImage");b.css("visibility","hidden");b.empty();b.animate({opacity:1},200);b.append(a);q()}function p(a){R&&R.hide();L.find("#ivLargeVideo").css("display","none");
L.find("#ivLargeImage").css("display","block");var d;"hero-image"===a?c.isDefined(N)&&(d=b(N[U.index])):c.isDefined(X)&&(d=b(X[U.index]));if(c.isDefined(d)){L.find(".fullscreen").remove();var e=h("<img>").attr("src",d).addClass("fullscreen"),f=L.find("#ivLargeImage");f.animate({opacity:.4},200,function(){e.load(function(){t(e)});if(e[0].complete)t(e);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;h("<img>").attr("src",O.staticImages.spinner).css({position:"relative",top:a+"px",left:b+
"px"}).appendTo(f)}})}}function H(){var a=parseInt(U.index,10)+1;a>=Q.length||L.find("#ivVideo_"+a).click()}function x(a){var b;qa||(qa=ia.find("#image_block_video_banner"),qa=qa.clone().attr("id","immersive_view_video_banner"));qa.appendTo(a);b=a.height()-a.find("#immersive_view_video_banner").height();b=b/a.height()*100;a.find(".airy").height(b+"%")}function A(){var a;c.isDefined(Q)&&(a=Q[U.index]);if(c.isDefined(a)){L.find("#ivLargeImage").css("display","none").empty();var b=L.find("#ivLargeVideo").css("display",
"block");R?(R.isDetached()&&R.attach(b[0]),c.loadMediaIntoAiry(R,a,da),R.show(),R.play({isAsync:!0}),O.displayVideoBanner&&x(b)):(R=c.createAiryInstanceForChromeful(b,a,da,"ImmersiveView"),O.displayVideoBanner&&x(b),da.enableContinuousPlay&&R.bind("ended",H),R.play({isAsync:!0}))}}function D(){U=I.getCurrentItem();var a;a="hero-image"===U.type?L.find("#ivHeroImage_"+U.index):"image"===U.type?L.find("#ivImage_"+U.index):"chromeful-video"===U.type||"chromeless-video"===U.type?L.find("#ivVideo_"+U.index):
c.isDefined(N)?L.find("#ivHeroImage_"+U.index):L.find("#ivImage_"+U.index);c.isjQueryObjDefined(a)||(a=L.find("#ivImage_0"));r(a)}function r(a){L.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(U.type="chromeful-video",U.index=a.attr("id").split("_")[1],A()):(a.hasClass("ivHeroImage")?U.type="hero-image":U.type="image",U.index=a.attr("id").split("_")[1],p(U.type))}function z(){L.delegate(".ivThumb","click",function(){var a=h(this);r(a)});L.delegate(".ivThumbVideoListOuter",
"click",function(){L.find(".ivThumbVideoListOuter").removeClass("selected");var a=h(this);a.addClass("selected");U.type="chromeful-video";U.index=a.attr("id").split("_")[1];A()})}function E(){R&&!R.isDetached()&&(da.volume=R.getVolume(),R.detach(),!document.all||u.atob||document.addEventListener||(R=null));L.find("#ivLargeImage").empty()}function B(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function K(a){var b=va.top-(a.pageY-ha[1])*V;a=B(va.left-(a.pageX-ha[0])*V,W.left);b=B(b,W.top);L.find(".fullscreen").css({left:a,
top:b})}function F(){L.delegate("#ivLargeImage","click",function(a){if(ra)q();else if(ga){L.find(".fullscreen").removeAttr("style");if(ga){var b=L.find("#ivLargeImage"),c=b.find(".fullscreen");ea?b.css("cursor","url('"+O.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));ra=!0;var d=L.find("#ivLargeImage");W.left=d.width()-c.width();W.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;ha=[b.offset().left+e,b.offset().top+
d];va.top=d-c.height()/2;va.left=e-c.width()/2;c.css({position:"relative",left:va.left,top:va.top});V=Math.max(c.height()/b.height(),c.width()/b.width())}K(a)}});L.delegate("#ivLargeImage","mousemove",function(a){ra&&K(a)})}function G(){var b;(b=!O.useIV)||(b=I.getCurrentItem().color,b=O.colorImages&&O.colorImages[b]&&0<O.colorImages[b].length?!0:!1,b=!b);if(!b){a.postCountMetric("dppc_immersiveViewOpened");if(c.isDefined(T))T.show();else{b=h("#auiImmersiveViewDiv");var e=h(u).height()-150,f=h(u).width()-
75;T=d.create(b,{name:"immersiveView",activate:"onclick",width:f,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});b.click()}if(aa){L=h("#ivMain");b=I.getCurrentItem().color;X=O.colorImages[b];N=O.heroImage[b];Q=O.useChildVideos?O.colorToVideo[b]:O.videos;U=I.getCurrentItem();J=Z=S=0;c.isDefined(N)&&(J=N.length);c.isDefined(X)&&(S=X.length);c.isDefined(Q)&&(Z=Q.length);b=L.find("#ivTitle");b.attr("title",O.title);b.text(g(O.title,45));if(c.isDefined(u.DetailPage)&&c.isDefined(u.DetailPage.StateController)){b=
L.find("#ivVariationSelection");b.empty();var e=u.DetailPage.StateController.getState(),f=e.variation_label_order,m;for(m in f)if(f.hasOwnProperty(m)){var n=f[m],r=e.selected_variations[n],n=e.variation_display_labels[n];r&&h("<div/>").addClass("ivVariations").text(n+":"+r).appendTo(b)}}m=L.find("#ivMediaSelect");0===S||0===Z?(m.parent().hide(),L.find("#ivThumbs").addClass("noMediaSelection")):(m.empty(),h("<option/>").attr("value","all").prop("selected",!0).text(O.staticStrings.allMedia+" ("+(J+
S+Z)+")").appendTo(m),h("<option/>").attr("value","images").text(O.staticStrings.images+" ("+(J+S)+")").appendTo(m),h("<option/>").attr("value","videos").text(O.staticStrings.videos+" ("+Z+")").appendTo(m),m.parent().show(),m.val("all"));m=L.find("#ivThumbs");m.find(".ivRow").not(".placeholder").remove();b=J+S+Z;for(f=e=0;e<b;)for(r=m.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(m),n=0;3>n&&e<b;n++,e++,f++)if(f<J){var p=N[e].thumb,q=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+e).appendTo(r);q.find(".ivThumbImage").css("background",'url("'+k(p)+'") center no-repeat')}else if(f>=J&&f<S+J)p=X[e-J].thumb,q=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(e-J)).appendTo(r),q.find(".ivThumbImage").css("background",'url("'+k(p)+'") center no-repeat');else if(p=Q[e-S-J],q=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id","ivVideo_"+(e-S-J)).appendTo(r),q.find(".ivThumbImage").css("background",
'url("'+p.thumbUrl+'") center no-repeat'),c.isDefined(p)){var t={position:"triggerTop"},B=L.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");B.find(".ivVideoPopoverTitle").text(p.title);B.find(".ivVideoPopoverDuration").text(p.durationTimestamp);t.inlineContent=B[0];l.declarative.create(q,"a-tooltip",t)}m=L.find("#ivVideoList");m.find(".ivThumbVideoListOuter").not(".placeholder").remove();b=m.find(".placeholder");for(e=0;e<Z;e++)f=Q[e],r=b.clone().removeClass("placeholder").appendTo(m),
r.attr("id","ivVideoList_"+e),r.find(".ivThumbImage").css("background",'url("'+f.thumbUrl+'") center no-repeat'),r.find(".ivThumbTitle").text(f.title),r.find(".ivThumbDuration").text(f.durationTimestamp);da=O.airyConfig;aa=!1;ca()}}}var M,O,I,P,T,L,N,X,Q,J,S,Z,U,R,da,qa,ia,ea=navigator.userAgent.match(/msie|trident/i),aa=!0,ra=!1,ga=!1,W={},va={},V,ha,ca=l.once(function(){v();z();F();l.on("a:popover:afterUpdatePosition:immersiveView",n);l.on("a:popover:afterShow:immersiveView",D);l.on("a:popover:afterHide:immersiveView",
E);f()});return function(a,b,c,d){M=this;O=a;I=b;P=d;M.render=function(a,b,c,d,e,f){aa=!0;ia=e};M.update=function(a){};P.register("imageClick",G)}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(l,d,e){return{load:function(d,c){c=c||{};c.timeout=c.timeout||4E3;l.ajax(d,c)}}});l.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF").register("imageBlockUtils",function(l,d,e,h,c,a){function b(a){return null!==a&&"undefined"!==typeof a}
function g(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[1],10);d>b&&(b=d)});return b}function k(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[0],10);d>b&&(b=d)});return b}function f(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=g(a);0<a&&(b=Math.min(b,a));return b}function m(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=k(a);0<a&&(b=Math.min(b,a));return b}function n(a){var c;d.each(a,function(a,d){b(c)||(c=d[1]/d[0])});return c||1}function v(a,b,c){b.fadeTo(500,0,
function(){t(a,c);b.fadeTo(500,1)})}function q(a){a&&a.toggle()}function t(a,c){var e=c.find("img");b(e[a])&&d(e[a]).click()}function p(a,b){z[a]=b?b:z[a];return z[a]}function H(a,c,e){e=e||r;e=e.colorImages;if(1>e.length||!b(e[a])||!b(c))return-1;var f=-1;d.each(e[a],function(a,b){b.variant===c&&(f=a)});return f}function x(a,c,e){e=e||r;e=e.colorImages;return!(b(e)&&b(e[a])&&b(e[a][c])&&b(e[a][c].main))||1>d.map(e[a][c].main,function(a,b){return b}).length?-1:e[a][c]}var A,D,r=d.extend(!0,{},c,a),
z={};return{isDefined:b,isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:n,getMaxHeightOfMainImage:m,getMaxWidthOfMainImage:f,getMaxDimensionsOfMainImage:function(a,b,c){var d=m(a,b,c);b=f(a,b,c);a=n(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,c,d){var e=a.get(0);a=0;if(b(e)){a=e.offsetWidth/c;a=Math.min(a,d);var f;c=r.mainImageHeightPartitions;d=r.mainImageMaxSizes;if(b(d)&&b(c)){for(var g=0,h=u.innerHeight||document.documentElement.clientHeight||
document.body.clientHeight,e=0;e<c.length;e++)h>c[e]&&(g=e+1);d.length>=g&&(f=d[g])}b(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,b){if(a){b=b||r;var c="";d.each(b.visualDimensions,function(b,d){a[d]&&(c+=" "+a[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,c){var d=c.find(".template").clone().removeClass("template").addClass("item"),e=document.createElement("img");e.src=b;d.find(".placeHolder").replaceWith(e);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===
b&&d.addClass("heroImageThumbnail");l.declarative.create(d,"thumb-action",a);c.append(d)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,f,g,k,m,n){var l=d.extend({},c.foresterMetadataParams);null!==f&&(l.method+="."+f);var r=[];b.disabledViewIds&&(r=b.disabledViewIds);return e.embed({parentElement:a[0],
streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:c.swfUrl,foresterMetadataParams:l,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:c.videoAds,bindings:{play:function(){"ImmersiveView"===f?A||(A=!0,h.postCountMetric("dppc_chromefulVideoPlayedIV")):D||(D=!0,h.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:b.durationSeconds-
1,type:"position",callback:function(a,b,c){g&&(v(0,k,n),q(m))}}],disabledViewIds:r})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(a){a&&(d("#imageBlock .unvailableVariation").html(a),d("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){d("#imageBlock .variationUnavailable").hide()},
fadeToThumbnail:v,toggleVideoCaption:q,selectThumbnail:t,spinner:function(a,b){var c=d("#imageBlock .a-spinner").parent();0===c.length&&(c=d("<div></div>").append(d("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),a.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px",
"border-radius":"100%"}));b?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:p,getIndexForVariant:H,getImageHash:x,lazyLoadingRequired:function(a,b,c){b=Math.max(H(a.color,b.getCurrentItem().variant,c),0);b=-1!==x(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==p(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled}}});
l.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(l,d,e,h,c){function a(a,b,c,f){if(!e.isjQueryObjDefined(a.find(".a-button-selected"))){var k=p.getCurrentItem();if(!f||"chromeless-video"!==k.type||!t.autoplayVideo){f=0;if("hero-image"===k.type){f=g(k.color,k.variant);if(-1===f)return;f=-1!==f?f:0}var m=b+f;m>=c&&(f=0,m=b);b=h.getHeroImageHash(t,k.color,f);-1!==b&&(H.dispatch("updateModel",{data:{index:f,thumbnailIndex:m,variant:b.variant,
type:"hero-image"}}),b=a.find(".item").get(m),e.selectGivenThumbnail(d(b),a))}}}function b(b,c,f){if("hero-video"===p.getCurrentItem().type)return b;c=t.heroImage&&t.heroImage[c];var g=b;e.isDefined(c)&&(d.each(c,function(a,c){b<t.maxAlts&&(e.createThumbnail({type:"hero-image",index:a,thumbnailIndex:b,variant:c.variant},c.thumb,x),b++)}),a(x,g,b,f));return b}function g(a,b){var c=t.heroImage;if(1>c.length||!e.isDefined(c[a])||!e.isDefined(b))return-1;var f=-1;d.each(c[a],function(a,c){c.variant===
b&&(f=a)});return f}function k(){if(A.length&&t.repositionHeroImage){var a=h.getHeroDimParams(t,p.getCurrentItem()),b;e.isDefined(a)&&(b=e.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",A.css({"background-position":b,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px "}),D.length||A.css({filter:"","-ms-filter":""}))}}function f(a,b,c,d){if(A.length&&a&&b){if("function"===typeof c||d){var f=new Image;f.onload=d?function(){D.length&&
A.fadeIn(2E3,function(){D.css("background-image",'url("")')});A.css("background-image",'url("'+a+'")')}:c;f.src=a}c=b[1];var f=b[0],g;d||A.css({"background-image":'url("'+a+'")'});t.repositionHeroImage&&(b=h.getHeroDimParams(t,p.getCurrentItem(),b),e.isDefined(b)&&(c=b.width,f=b.height,g=e.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));A.css({"background-position":g,"background-size":c+"px "+f+"px ","max-width":c+"px ","min-height":f+"px "});D.length||A.css({filter:"","-ms-filter":""})}}
function m(a,b,c,e){a=h.getHeroImageHash(t,a,b);if(-1===a)return-1;b=d.map(a.main,function(a,b){return b})[0];f(b,a.main[b],c,e)}function n(a,b,c){if("hero-image"!==a.type)return-1;var d=g(a.color,p.getCurrentItem().variant),d=-1!==d?d:0;if(-1===h.getHeroImageHash(t,a.color,d))return-1;var e=p.getCurrentItem();a.thumbnailIndex=e.thumbnailIndex;a.type=e.type;a.variant=e.variant;a.index=d;u(a,b,c)}function u(a,b,c){var d=h.getHeroImageHash(t,a.color,a.index),e;e=a&&r&&l.equals(a,r)?!0:!1;r||(r=a);if(!e&&
a||b)m(a.color,a.index,b,c),r=a;A.removeClass("hide-background");l.trigger("dp:image-block:update",d)}var q,t,p,H,x,A,D,r={};return function(a,c,f,g){q=this;t=a;p=c;H=g;t.heroImage[t.landingAsinColor]=t.heroImage[t.defaultColor];q.render=function(a,c,e,f,g,h,k){x=f;A=d("#heroImage");D=d("#heroImageLowRes");a=b(c,a,h);n(p.getCurrentItem(),k,h);return a};q.update=function(a){var b=a.data;"ingress"!==b.type&&A.addClass("hide-background");"swatchHover"===a.type?a.captured||(b.type=p.getCurrentItem().type,
-1!==n(b)&&(a.captured=!0)):"hero-image"===b.type&&(u(b),"click"!==a.type&&t.usePeekHover||e.selectGivenThumbnail(a.$declarativeParent,x))};H.register("resize",k)}});l.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(l,d,e,h,c){var a,b,g,k;return function(c,d,e,h){a=this;b=c;g=h;a.render=function(c,d,e,f,g,h,m){k=f;a=this;e=b.maxAlts;f=d;g=b.colorImages[c]?b.colorImages[c].length:0;h=b.useChildVideos&&b.colorToVideo[c]?
b.colorToVideo[c].length:b.videos?b.videos.length:0;c=b.heroImage[c];m=0;c&&(m=c.length);c=g+h+m;c>e&&(e=c-e,c=k.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),e+="+",f={type:"ingress",index:0,thumbnailIndex:d,variant:""},c.find("#altIngressText").append(e),l.declarative.create(c,"thumb-action",f),k.append(c),f=d++);return f};a.update=function(a){"ingress"===a.data.type&&"click"===a.type&&g.dispatch("imageClick",a)}}});
l.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(l,d,e){return function(d,c,a){this.getImageHash=function(b){var c=a.getCurrentItem();b=e.getIndexForVariant(c.color,b||"MAIN",d);return e.getImageHash(c.color,b,d)};this.onImageUpdateForTwister=function(a){c.register("updateSelection",function(c){"swatchClick"===c.type&&"function"===typeof a&&a()})}}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(l,d,e){function h(a,c){var d;if(c.repositionHeroImage){d=
a[1];var e=a[0];if(768>=(u.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,e*=.7;else{var h=((u.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);d*=.7+.3*h;e*=.7+.3*h}d=[d,e]}return d}function c(a,c,d){var f;if(d.repositionHeroImage){var h=u.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(e.isDefined(d)){f=Math.max((h-Math.min(1500,a))/2,0);var n=
Math.max((h-a)/2,0);f-=n;h=Math.max(Math.min(h,1500),1024);f=f+(h-420-23)/2-a/c[1]*d}}return f}function a(a,c,h){a=a.heroImage;return!(e.isDefined(a)&&e.isDefined(a[c])&&e.isDefined(a[c][h])&&e.isDefined(a[c][h].main))||1>d.map(a[c][h].main,function(a,b){return b}).length?-1:a[c][h]}return{getHeroImageHash:a,getHeroDimParams:function(b,g,k){if(b.repositionHeroImage){if(!e.isDefined(k)){k=a(b,g.color,g.index);if(-1===k)return;g=d.map(k.main,function(a,b){return b})[0];k=k.main[g]}g=h(k,b);b=c(g[0],
k,b);return{height:g[1],width:g[0],xPos:b,yPos:75}}}}})})})(function(){var l=window.AmazonUIPageJS||window.P,u=l._namespace||l.attributeErrors;return u?u("DetailPageImageBlockAssets"):l}(),window);